{% extends 'nav.html' %}
{% block content %} {% load static %}

<div class="overlay_cj"></div>
<main id="cafe_detail">
    <div class="detail_container d-flex flex-column">
        
        <div class="cafe_index shadow d-flex">
            <div class="cafe_index_image">
                <img src="https://picsum.photos/300/400" width="150" height="200"/> <!-- ERD : Cafe image ëŒ€í‘œì‚¬ì§„-->
            </div>
            <div class="cafe_indexbox">
                <div class="cafe_index_name">
                    ì¹´í˜ ìƒí˜¸ëª…:{{cafe.name}} <!-- ERD : Cafe name ìƒí˜¸ëª…-->
                </div>
                <div class="cafe_index_district">
                    ìœ„ì¹˜:{{cafe.location_id}}<!-- ERDì— ëª…ì‹œx , Cafe addressì—ì„œ 'êµ¬'ë§Œ ë”°ë¡œ ë¹¼ì™€ì•¼í• ê¹Œ? -->
                </div>
                <div class="cafe_index_keywords">
                    #ìš°ì„  ë‚˜ì¤‘ì— <!-- ERD : 'CafeKeyword cafe_id ì¹´í˜ì‹ë³„ì' ì™¸ë˜í‚¤ì°¸ì¡° -->
                </div>
                <div class="cafe_index_review d-flex flex-column">
                    <div class="cafe_index_reviewers">
                        {{review_cnt}}ëª…ì˜ í‰ê°€ <!-- Review user_id ìœ ì €ì‹ë³„ìì—ì„œ ëª… ìˆ˜ ì„¸ì„œ í‘œì‹œí•´ì•¼ í• ë“¯ -->
                    </div>
                    <div class="cafe_index_score">
                        {{cafe.average_star}}ì  <!-- ì–´ì¼€ í• ì§€ ëª¨ë¥´ê² ìŒ -->
                    </div>
                    <div class="cafe_index_star">
                        {%if r_average_star==0%}
                        â­ï¸ï¸ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ 
                        {% elif r_average_star==1%}
                        â­ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸
                        {% elif r_average_star==2%}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸
                        {% elif r_average_star==3%}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸
                        {% elif r_average_star==4%}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸ â˜†ï¸ï¸ï¸ï¸
                        {% elif r_average_star==5%}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸ 
                        {% endif %}
                        
                    </div>
                </div>
                <div class="index_buttons d-flex">
                    <!-- <button id="signup_btn" type="submit" onclick="" data-bs-toggle="modal" data-bs-target="#howorder"></button> -->
                    <!-- <button  href="#not_login" class="review_like d-flex" role="button" data-toggle="modal">â™¥ì¢‹ì•„ìš”</button> -->
                    
                    {% if request.user.is_authenticated %}
                    <button class="review_like d-flex" data-bs-toggle="modal" data-bs-target="#not_login" onclick="onClickLike({{cafe.id}}"></button>
                    <button class="review_write d-flex" data-bs-toggle="modal" data-bs-target="#not_login" href="">âœğŸ»ë¦¬ë·° í•˜ê¸°</button>
                    {% else %}
    
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="cafe_info shadow d-flex flex-column">
            <div class="cafe_info_address d-flex">
                <div class="cafe_info_index">ì£¼ì†Œ</div>
                <div class="address"> {{cafe.address}}</div> <!-- ERD : Cafe address ìƒì„¸ì£¼ì†Œ-->
            </div>
            <div class="cafe_info_number d-flex">
                <div class="cafe_info_index">ì „í™”ë²ˆí˜¸</div>
                <div class="number"> {{cafe.number}}</div> <!-- ERD : Cafe number ì „í™”ë²ˆí˜¸-->
            </div>
            <div class="cafe_info_runtime d-flex">
                <div class="cafe_info_index">ì˜ì—…ì‹œê°„</div>
                <div class="runtime"> {{cafe.runtime}}</br>í† ,ì¼  11:00 ~ 23:30</div> <!-- ERD : Cafe runtime ì˜ì—…ì‹œê°„-->
            </div>
            <div class="cafe_info_menu d-flex">
                <div class="cafe_info_index">ë©”ë‰´</div>
                &nbsp; &nbsp;
                <div class="menu">
                    {{cafe.menu}}
                    ì•„ë©”ë¦¬ì¹´ë…¸ &nbsp; &nbsp; &nbsp; 4,000ì›
                    </br>ì˜¤ì¸ ë¼ë–¼ &nbsp; &nbsp; &nbsp; 4,500ì›
                    </br>ì•„ì¸ìŠˆí˜ë„ˆ &nbsp; &nbsp; &nbsp; 5,500ì›
                    </br>ë”ì¹˜ &nbsp; &nbsp; &nbsp; 4,000ì›
                    </br>ë”ì¹˜ ë°”ë‹ë¼ &nbsp; &nbsp; &nbsp; 4,500ì›</div> <!-- ERD : Cafe menu ë©”ë‰´ì •ë³´-->
            </div>
        </div>
        {% for review in all_review %}
        <div class="cafe_reviews shadow d-flex flex-column">
            <div class="cafe_review_Allinfo d-flex flex-column">
                <div class="cafe_review_info d-flex">
                    <div class="cafe_review_title d-flex">
                        {{review.title}}
                    </div>
                    <div class="cafe_review_nickname d-flex">
                        ì°½ì°½í•œ ê°•ì¥ {{review.user_id.nickname}}
                    </div>
                    <div class="cafe_review_time d-flex">
                        {{review.created_at}} <!-- ERD : Review time ì‘ì„±ë‚ ì§œ-->
                    </div>
                    <div class="cafe_review_studentmark d-flex">
                        {% if review.mark == true %} 
                        <img src="/static/image/main_crown 2.png" class="studentmark" width="80px" height="80px"> 
                        {%else%}
                        
                        {% endif %}
                    </div> <!--ëŒ€í•™ìƒ ì¸ì¦ ë§ˆí¬-->
                </div>
                <div class="cafe_review_scorestar d-flex">
                    <div class="cafe_review_score d-flex">
                        {{reveiw.star}}ì 
                    </div>
                    <div class="cafe_review_star d-flex">
                        {% if review.star ==1 %}
                        â­ï¸ï¸ï¸
                        {% if review.star ==2 %}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸
                        {% if review.star ==3 %}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸
                        {% if review.star ==4 %}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸ï¸ï¸ï¸
                        {% if review.star ==5 %}
                        â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸â­ï¸ï¸ï¸ï¸ï¸ 
                    </div>
                </div>
            </div>
            
            <div class="cafe_review_content d-flex"> <!-- ERD : Review content ë‚´ìš©-->
                {{review.content}}
                    Lorem ipsum dolor sit amet consectetur.
                    Massa augue pellentesque at leo sed viverra sed lacus lacus.
                    Risus sit eu id turpis lacus amet nunc quis fames.
                    Tortor volutpat arcu pharetra sed sed elit blandit purus.
                    Placerat erat interdum tortor semper.
            </div>
            <div class="cafe_review_keywords d-flex">
                {% for value, text in form..field.choices %}
                <div class="ui slider checkbox"></div>
                <input id="id_providers_{{ forloop.counter0 }}" name="{{ form.providers.name }}" type="checkbox" value="{{ value }}"{% if value in checked_providers %} checked="checked"{% endif %}>
                <label>{{ text }}</label>
                </div>
                {% endfor %}
                #ê³µë¶€í•˜ê¸° ì¢‹ì€ #ë¶„ìœ„ê¸° ì˜ˆìœ #ì €ë ´í•œ <!-- ERD :  'CafeKeyword review_id ë¦¬ë·°ì‹ë³„ì' ì™¸ë˜í‚¤ì°¸ì¡°-->
            </div>
            <div class="cafe_review_images">
                <img class="cafe_review_image" src="https://picsum.photos/150/150"/> <!-- ERD : Cafe image ëŒ€í‘œì‚¬ì§„, ì‚¬ì§„ì„ ë‹´ì„ erdê°œì²´ê°€ í•„ìš”í•´ë³´ì„[Review.imageê°œì²´ê°€ ìˆë‹¨ë‹¤ ì°½ì§„ì•„]-->
                <img class="cafe_review_image" src="https://picsum.photos/150/150"/> <!-- ERD : Cafe image ëŒ€í‘œì‚¬ì§„, ì‚¬ì§„ì„ ë‹´ì„ erdê°œì²´ê°€ í•„ìš”í•´ë³´ì„[Review.imageê°œì²´ê°€ ìˆë‹¨ë‹¤ ì°½ì§„ì•„]-->
                <img class="cafe_review_image" src="https://picsum.photos/150/150"/> <!-- ERD : Cafe image ëŒ€í‘œì‚¬ì§„, ì‚¬ì§„ì„ ë‹´ì„ erdê°œì²´ê°€ í•„ìš”í•´ë³´ì„[Review.imageê°œì²´ê°€ ìˆë‹¨ë‹¤ ì°½ì§„ì•„]-->
                <img class="cafe_review_image" src="https://picsum.photos/150/150"/> <!-- ERD : Cafe image ëŒ€í‘œì‚¬ì§„, ì‚¬ì§„ì„ ë‹´ì„ erdê°œì²´ê°€ í•„ìš”í•´ë³´ì„[Review.imageê°œì²´ê°€ ìˆë‹¨ë‹¤ ì°½ì§„ì•„]-->
                
            </div>
        </div>
        {% endfor %}
    </div>
</main>
<!-- modal -->
<!--ë¡œê·¸ì¸ ì•ˆí•˜ê³  ë¦¬ë·°ì“°ê¸°or ì¢‹ì•„ìš” í´ë¦­ì‹œ ë„ìš°ëŠ” ëª¨ë‹¬-->
{% comment %} <div class="modal fade" id="not_login">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header"></div>
            <div class="modal-body">
                <span class="modal_text1">ë¡œê·¸ì¸ ì´í›„ì— ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.</span>
            </div>
            <div class="modal-footer">
                <button type="button" onclick = "location.href = '#ë¡œê·¸ì¸í˜ì´ì§€ì£¼ì†Œ' " class="close-btn" data-bs-dismiss="modal">
                    ë¡œê·¸ì¸
                </button>
            </div>
        </div>
    </div>
</div> {% endcomment %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
<script src="/static/js/cafe_like.js"></script>
{% endblock %}